# Week 1: オリエンテーション、R(Studio)のインストールと操作、R Markdown


```{=html}
<style>
.infobox {
  padding: 1em 1em 1em 4em;
  margin-bottom: 10px;
  border: 2px solid orange;
  border-radius: 10px;
  background: #f5f5f5 5px center/3em no-repeat;
}

.beg {
  background-image: url("https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjHtu3kBX8P39WYBBAjar9c8c1ladK2SYL6_gEMXFweQfauWVhSvCQP5KELsPX5KNL1uOddLLQ-aeMxv904OW_NFFfANhBYObfBV09KO2EXehrb9kMdCLZY1afsChib-7zIkBJbG6OrbJpM/s400/aisatsu_kodomo_boy.png");}

.caution {
  background-image: url("https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhzMqkpQ7vLUKvumbm6AFwTLQiCe7tlDb2Q0MAiISLsesZHnhj0kbRjB4U3se3UrDIHfIy0hlahyphenhyphenQu-V2tOR2LcV_lX7U8P5a8jtqPYv3Ah4L-JoYi8PhoaoehumGIdp2vrsX0rRyhXqwA/s800/mark_chuui.png");}
  
</style>
```

## 「とーけいしょり」とは

### 量的研究、質的研究
- 本講義のタイトルにある「統計処理」は、<u>研究の目的などに応じて得られたデータをまとめたり、可視化したり解析する行為</u>を指します。言語に関する研究の手法は大きく分けて以下の2つがある。

  1. 量的研究（ quantitative research ）
    - 数量を用いて分析。一般化が目的。「仮説検証型」。
  2. 質的研究（ qualitative research ）
    - 数量化せずに分析。一般化は目的ではない。「仮説生成型」。

　寺井は量的な研究しか行ってきていないため、本講義では量的な研究を行うことを念頭に統計処理の方法について講義を行う。しかし、それらが質的研究と全く関連がないわけではない（もし質的な研究に関心がある受講生の方がいたら、関連すると思う点を教えてください）。

- 量的研究では数量を扱うため、統計手法を用いて分析を行うことが多い。よって、量的研究を行う場合、統計に関する知識が必要不可欠。

- データ収集の前に分析手法をある程度決めておく必要がある（Garbage in, garbage out. ）。使用する統計手法だけでなく、以下のことも十分に考えておくことが必要。

  - どんなデータが必要？(What)
  - どのようにデータを取ればいい？ (How)
  - どれくらいのデータが必要？ (How many)
  - 誰に対してデータを取る？(Who)

## Rとは

- Rはプログラム言語の一種で、統計解析向けの言語。統計解析以外にもWebアプリを作ったり資料を作成したりすることも可能（この資料もRを使って作成しています）。Rは無料でインストール・使用することができる。

- Rに備わっている機能だけで分析を行うことができるが、世界中のRユーザーが開発した機能（**パッケージ**）を無料でインストールすることができる。これにより、様々な分析を行うことができるが、それらのアップデートが行われるため注意が必要である（アップデートにより以前と同じように動かないということも起こりうるため）。

  - RをiPhone本体、パッケージをXやInstagramなどのアプリとイメージするとよい

- Excelなどコードを書かなくても統計解析を行うことができるソフトウェアは多い。しかし、ソフトウェアは無料のものばかりではなく、また実行したい分析を機能として持っていない可能性がある。近年では生成AIなどによって、プログラミングのハードルが以前よりも低くなったと考えられる。ソフトウェアで実行するよりも、プログラミング言語を駆使して分析を行う方が、統計以外の知識にもつながる。最初は「二階から目薬」のような気持ちになるかもしれないが、根気強く、授業者、友人、先輩、そしてAIさん達に頼りながら取り組んでほしい。


## Rのインストール

- 🔊　Windowsを使用している人で、DocumentsのパスにOne Driveが関係している人は教えてください。将来悪さをする可能性がある。

1. Rの公式サイトにアクセス（ https://www.r-project.org/ ）
2. CRANをクリック
3. Japanのリンクをクリック（Yamagata University）
4. 自分のパソコンのOSを選択
5. "install R for the first time"をクリック。全部NextでOK!

- インストールが完了したら、Rを立ち上げて以下のコードを入力する。Enterを押すと命令が実行される。

```{r}

20 + 1

20 - 1

3 * 4

4 / 2

2 ^ 2

```


## RStudioとは

- Rだけでも分析は可能だが、Rだけの解析は難しい。そこで、よりRでの解析を行いやすくする統合開発環境（RStudio）の中でRを使用する。
- 注意点として、Rのインストールも必ず行う必要がある。
- RStudioはWeb版とローカル版があり、前者はオンライン上で使用するが、後者は各個人のパソコンで使用する。Web版の使用には、サーバーが必要であるため、基本的にローカル版（RStudio Desktop）での使用に慣れる方がよい。

## RStudioのインストール

1. RStudioのサイトへ行く（ https://posit.co/download/rstudio-desktop/ ）
2. All Installers and Tarballsで自分自身のパソコンのOSを選び、ダウンロード

## RStudioの機能
- 4つのペイン：

  - ソース

    - 実行するコードのメモ帳
    
  - 環境・履歴
  
    - 読み込んだデータを表示したりや過去に実行したコマンドを記録できる
    
  - コンソール
  
    - R。ソースペインを実行する場所
    
  - ファイル・作図・パッケージ・ヘルプ
  
    - ワーキングディレクトリにあるファイルを表示したり、作成した図を確認したり、インストールされているパッケージを確認したり、パッケージの使い方を確認する
    
## プロジェクト機能

- プロジェクト = ディレクトリ
  -   ファイルや操作履歴を保存できる
  
::: infobox
ディレクトリ（📁）とは、場所のこと。Rは一か所にしか滞在できない、移動する際も、命令してあげないと自分で勝手に移動してくれない。📁ごとが異なる場所であるため、ファイルを読み込んだりする場合も、Rがいる場所と、ファイルがある場所が異なる場合、Rを移動させるか、ファイルをRがいる箇所まで移動させないと読み込むことはできない。
:::
  
- プロジェクトを作成する利点
  -   研究ごとに分析に必要なファイルをまとめることができる
    
### プロジェクトの作成
- ドキュメントディレクトリに新しいフォルダーを作成
    - **名前は、絶対英数字のみ！（Rが関係しそうな場合、ファイル名、フォルダ名に日本語を使わない方が安心です）**
    
    -   作り方を解説しているサイト（[私たちのR](https://www.jaysong.net/RBook/project.html)）

1. RStudioを開き、右上の[Project:]ボタンをクリック。
2. [New Project]をクリックし、[Existing Directory]から、先ほど作成した名前のディレクトリを選択

- <u>今後、この講義で配布されたファイルや、作成したファイルは全てそのディレクトリ内に入れるようにしてください
- 今後、この講義でRStudioを使用する場合は必ずこのプロジェクトを開いてください</u>


## RStudioのカスタマイズ
- [RStudioの設定変更【見た目】](https://qiita.com/masato-terai/items/4200f3817972fede2dd2)

  - 文字のサイズを大きくしたり、背景の色を変更することが可能
  - その他にも、()の色分けをしてくれたりなど分析の補助になる機能もある

## R Markdown入門

- Rの出力結果を文字や写真、リンクなどと一緒に出力できるもの。

- 左上の紙のマークを押して、R Markdownを開く

- 【パーツ１】YAML（YAML　Ain't Markup Language）ヘッダー：文章全体の体裁や情報を操作する

    -   タイトル、サブタイトル
    -   作成者
    -   作成した日時、更新日時も設定可能
    -   どのような形式で作成するか

::: {.infobox .caution data-latex="{caution}"}
**注意**<br>
・ YAMLヘッダーは、RでもMarkdownでもないプログラム言語で記述
:::

-   【パーツ２】コードチャンク：Rのコードを記述するところ

-   【パーツ３】ドキュメントチャンク：[Markdownと呼ばれるプログラム言語](https://www.jaysong.net/RBook/rmarkdown.html#rmarkdown-intro)で記述するところ

    -   見出し、表、箇条書き、強調、斜体など、Wordのリボン部分にある機能をMarkdownで書く

### Knit🧶を押して出力！
- 初期設定はHTMLファイル出力

## ドキュメントチャンク：Markdown記法

### 覚えるのはマストではない。その都度調べてよく使うものを覚えていく

-   Markdownなら生成AIはほぼ完ぺきに正解を教えてくれる
-   [必要最低限で覚えておくとよい記法](https://qiita.com/tbpgr/items/989c6badefff69377da7)
    -   見出し → これはマスト！
        -   #の数で指定。文字との間を半角あけるのを忘れない。
    -   箇条書き
        -   `*`, `+`, `-`のいずれかを入れる。文字との間を半角あけるのを忘れない。
        -   半角スペースを2つ前（もしくはtab）に入れると、レベル２を作れる。さらに2ついれると、、、
    -   強調
        -   \*で挟むと斜体
        -   \*\*で挟むとBold体
        -   \*\*\*で挟むとどうなるでしょう

## Let's 実践

-   以下の文章をR Markdownを使って再現してください。

::: infobox
## 名古屋飯といえば

## ひつまぶし：*Hitsumabushi*

おすすめは以下のお店です。

- **ひつまぶし花岡**
  - 場所：栄
:::

## 答え合わせ

```{markdown}
# 名古屋飯といえば
## ひつまぶし：*Hitsumabushi*
おすすめは以下のお店です。

- **ひつまぶし花岡**
  - 場所：栄

```

## コードチャンクの挿入

### ショートカットキーが便利：[Ctrl] + [Alt] + [I]（Windows）、[Command] + [Option] + [I]（Mac）

-   このコードの中はR。Rで使う関数などを自由に指定できる
-   以下のチャンク内でないと、動かない = Rの命令として実行してもらえない

\`\`\`{r}\
\`\`\`

```{r}
dat <- c(1, 4, 6)

mean(dat)

```

```{r}
plot(dat)
```


## Let's 実践

-   以下をドキュメントチャンクとコードチャンクを使って再現してください。

::: infobox
## 食費の合計

- 以下は、名古屋旅行で使った食費の合計である。

  - **注!** *hitsu*はひつまぶし、*miso*は味噌カツを表す。

```{r}
hitsu <- 1300 * 2

miso <- 1000 * 2

total <- sum(hitsu, miso)
```
:::

## 答え合わせ

```{markdown}
## 食費の合計
- 以下は、名古屋旅行で使った食費の合計である。

  - **注!** *hitsu*はひつまぶし、*miso*は味噌カツを表す

\```{r}
hitsu <- 1300 * 2

miso <- 1000 * 2

total <- sum(hitsu, miso)
\```

```


## 次週までの課題
### 課題内容
- 自己紹介の文をR Markdownで作成し、出力したHTMLファイルを提出してください。以下の2項目を必ず入れてください。外部に公開してもいい情報だけを入れてください！

- 名前、出身、研究科、自分の研究したいことを二文くらいでまとめる。

### 提出方法
- メールにファイルを添付して送信。
- 締め切りは今週の木曜日まで

## 参考文献
- 📚外国語教育ハンドブック
- 💻[RStudioの設定変更【見た目】]
- 📚RユーザーのためのRSTudio［実践］入門
- [私たちのR](https://www.jaysong.net/RBook/project.html)